<?php 
$this->headLink()
    ->appendStylesheet('/assets/bootstrap-toggle-buttons/static/stylesheets/bootstrap-toggle-buttons.css')
    ;

$this->inlineScript()
    ->appendFile('/assets/bootstrap-toggle-buttons/static/js/jquery.toggle.buttons.js')
    ->appendFile('/js/forms/project/setup.js')
/**/;


$this->inlineScript()->captureStart();
echo <<<JS
    $(function(){
        $("#slider-range-min").slider({
            range: "min",
            value: {$project->getWeighting()},
            min: 0,
            max: 100,
            slide: function (event, ui) {
                $("#slider-range-min-amount").text('Current Weighting: ' + ui.value + "%");
            },
            change: function (event, ui) {
                $('input[name=weighting]').val(ui.value);
            }
        });

        $("#slider-range-min-amount").text('Current Weighting: '+$("#slider-range-min").slider("value")+'%');
        
            /**/
    });

JS;
$this->inlineScript()->captureEnd();





$form = $this->form;
$form->setAttribute('class', 'form-horizontal');
$form->prepare();


?>
<?php echo $this->form()->openTag($form); ?>
<div class="row-fluid">
    <div class="span12">
        <div id="msgs"></div>
        <div class="widget widget-tabs green" id="product-widget-color">
            <div class="widget-title">
                <h4 class="modify-title-product"><i class="icon-cog"></i> Settings</h4>
            </div>
            <div class="widget-body relative">
                <div id="setupLoader" class="loader"></div>
                <div class="tabbable ">
                    <ul class="nav nav-tabs" id="tabsProjectSettings">
                        <li class=""><a data-number="3" href="#widget_tab3" data-toggle="tab">Weighting</a></li>
                        <li class=""><a data-number="2" href="#widget_tab2" data-toggle="tab">Environment</a></li>
                        <li class="active"><a data-number="1" href="#widget_tab1" data-toggle="tab">Configuration</a></li>
                    </ul>
                    <?php echo $this->form()->openTag($form); ?>
                    <input type="hidden" name="systemId" value="" style="display: none" />
                        <div class="tab-content" style="min-height: 420px">
                            <div class="tab-pane active" id="widget_tab1">
                                <div class="control-group">
                                    <label class="control-label">Name</label>
                                    <div class="controls">
                                        <?php echo $this->formElement($form->get('name'));  ?>
                                    </div>
                                </div>
                                <div class="control-group">
                                    <label class="control-label">Mode</label>
                                    <div class="controls">
                                        <div id="text-toggle-button">
                                            <?php echo $this->formElement($form->get('test'));  ?>
                                        </div>
                                    </div>
                                </div>
                                <div class="control-group">
                                    <label class="control-label">Sector</label>
                                    <div class="controls">
                                        <?php echo $this->formElement($form->get('sector'));  ?>
                                    </div>
                                </div>
                                <div class="control-group">
                                    <label class="control-label">Type</label>
                                    <div class="controls">
                                        <?php echo $this->formElement($form->get('type'));  ?>
                                    </div>
                                </div>
                                <div class="control-group">
                                    <label class="control-label">Finance Provider</label>
                                    <div class="controls">
                                        <?php echo $this->formElement($form->get('financeProvider'));  ?>
                                    </div>
                                </div>
                                <div class="control-group">
                                    <label class="control-label">Finance Option</label>
                                    <div class="controls">
                                        <?php echo $this->formElement($form->get('financeYears'));  ?>
                                    </div>
                                </div>

                                <div class="control-group">
                                    <label class="control-label">MCD</label>
                                    <div class="controls">
                                        <?php echo $this->formElement($form->get('mcd'));  ?>
                                    </div>
                                </div>
                                <div class="control-group">
                                    <label class="control-label">Warranty Type</label>
                                    <div class="controls">
                                        <?php echo $this->formElement($form->get('ibp'));  ?>
                                    </div>
                                </div>

                            </div>
                            <div class="tab-pane" id="widget_tab2">
                                <div class="control-group">
                                    <label class="control-label">Fuel Tariff</label>
                                    <div class="controls">
                                        <div class="input-prepend input-append">
                                        <?php echo $this->formElement($form->get('fuelTariff'));  ?><span class="add-on">pence per unit</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="control-group">
                                    <label class="control-label">Maintenance</label>
                                    <div class="controls">
                                        <div class="input-prepend">
                                        <span class="add-on">&#163;</span><?php echo $this->formElement($form->get('maintenance'));  ?>
                                        </div>
                                    </div>
                                </div>
                                <div class="control-group">
                                    <label class="control-label">Carbon Factor</label>
                                    <div class="controls">
                                        <?php echo $this->formElement($form->get('co2'));  ?>
                                    </div>
                                </div>
                                <div class="control-group">
                                    <label class="control-label">RPI</label>
                                    <div class="controls">
                                        <?php echo $this->formElement($form->get('rpi'));  ?>
                                    </div>
                                </div>
                                <div class="control-group">
                                    <label class="control-label">EPI</label>
                                    <div class="controls">
                                        <?php echo $this->formElement($form->get('epi'));  ?>
                                    </div>
                                </div>
                                <div class="control-group">
                                    <label class="control-label">ECA Factor</label>
                                    <div class="controls">
                                        <?php echo $this->formElement($form->get('eca'));  ?>
                                    </div>
                                </div>
                                <div class="control-group">
                                    <label class="control-label">Carbon Allowance</label>
                                    <div class="controls">
                                        <?php echo $this->formElement($form->get('carbon'));  ?>
                                    </div>
                                </div>
                                <div class="control-group">
                                    <label class="control-label">Default Model</label>
                                    <div class="controls">
                                        <?php echo $this->formElement($form->get('model'));  ?>
                                    </div>
                                </div>
                            </div>
                            <div class="tab-pane" id="widget_tab3">
                                <div class="control-group">
                                    <label class="control-label">Status</label>
                                    <div class="controls">
                                        <?php echo $this->formElement($form->get('status'));  ?>
                                    </div>
                                </div>
                                <hr />
                                <div class="control-group">
                                    <label >Select the weighting that best reflects the progress of the project.</label>
                                    <div class="widget-body">
                                        <div class="sliders">
                                            <?php echo $this->formElement($form->get('weighting'));  ?>
                                            <div id="slider-range-min" class="slider"></div>
                                            <div class="slider-info">
                                                <span class="slider-info" id="slider-range-min-amount"></span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <hr />
                            </div>
                        </div>
                    <?php echo $this->form()->closeTag($form); ?>
                </div>
                <div id="productMsgs"></div>
                <button class="btn btn-default" disabled="disabled" id="btn-last"><i class="icon-arrow-left icon-white"></i> Last</button>
                <button class="btn btn-default" id="btn-next">Next <i class="icon-arrow-right icon-white"></i></button>
<?php if ($this->isGranted('project.write')) { ?>
                <button class="btn btn-success pull-right" id="btn-modify-system-entry"><i class="icon-ok icon-white"></i> Save Changes</button>
<?php } ?>
            </div>
        </div>
    </div>
</div>

<?php echo $this->form()->closeTag($form); ?>
            
